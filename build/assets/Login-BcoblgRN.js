import{r as b,_ as S,R as F,b as k,c as q,P as j,o as P,v as R,h as y,j as e}from"./index-Cwsbtslf.js";import{c as g,a as c,F as C,b as N,C as d}from"./CustomCFormInput-R6ZhCQt0.js";import{a as E}from"./isSymbol-C4hJnqVa.js";import{b as L,a as o}from"./CContainer-Y1mteLO7.js";import{C as m,a as r}from"./CRow-YNLixlNm.js";import{C as B,a as I}from"./CCardBody-Bc4MtlRY.js";import"./CFormInput--xOEIcm_.js";var h=b.forwardRef(function(s,t){var i=s.children,n=s.className,l=S(s,["children","className"]);return F.createElement("div",k({className:q("card-group",n)},l,{ref:t}),i)});h.propTypes={children:j.node,className:j.string};h.displayName="CCardGroup";const U=()=>{const s=R(),[t,i]=b.useState("login");y.userDetailByMe&&s("/users/me");const n=g().shape({userName:c().required("Username is required"),password:c().required("Password is required").min(6)}),l=g().shape({email:c().email("Invalid email").required("Email is required")}),v=async a=>{try{await E.login(a,s)}catch{}},f=async(a,{setErrors:p})=>{var x,u;try{await y.forgotPasswordUser(a.email,s)}catch(w){p({email:((u=(x=w.response)==null?void 0:x.data)==null?void 0:u.message)||"Failed to reset password"})}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(L,{children:e.jsx(m,{className:"justify-content-center",children:e.jsx(r,{md:5,children:e.jsx(h,{children:e.jsx(B,{className:"p-4",children:e.jsx(I,{children:t==="login"?e.jsx(C,{initialValues:{userName:"",password:""},validationSchema:n,onSubmit:v,children:({isSubmitting:a})=>e.jsxs(N,{children:[e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),e.jsx("div",{className:"mb-3",children:e.jsx(d,{name:"userName",placeholder:"Username",autoComplete:"username",type:"text"})}),e.jsx("div",{className:"mb-3",children:e.jsx(d,{name:"password",placeholder:"Password",autoComplete:"password",type:"password"})}),e.jsxs(m,{children:[e.jsx(r,{xs:6,children:e.jsx(o,{color:"primary",type:"submit",disabled:a,variant:"outline",children:"Login"})}),e.jsx(r,{xs:6,className:"text-end",children:e.jsx(o,{color:"link",className:"px-0",type:"button",onClick:()=>i("forgot"),children:"Forgot password?"})})]})]})}):e.jsx(C,{initialValues:{email:""},validationSchema:l,onSubmit:f,children:({isSubmitting:a})=>e.jsxs(N,{children:[e.jsx("h1",{children:"Forgot Password"}),e.jsx("p",{className:"text-body-secondary",children:"We'll send a link to your email to reset your password"}),e.jsx("div",{className:"mb-3",children:e.jsx(d,{name:"email",placeholder:"Enter your email",type:"email"})}),e.jsxs(m,{children:[e.jsx(r,{xs:6,children:e.jsx(o,{type:"submit",color:"primary",disabled:a,variant:"outline",children:"Reset"})}),e.jsx(r,{xs:6,className:"text-end",children:e.jsx(o,{type:"button",color:"link",className:"px-0",onClick:()=>i("login"),children:"Back to login"})})]})]})})})})})})})})})},M=P(U);export{M as default};
